<html>
  <head>
    <script>
      buttons = {'magic-btn': {
        callback: function() {
          document.write('You just pressed a button created on the third-party site by this iframe plugin.');
        }
      }}

      function handleMessageFromThirdParty(e) {
        details = JSON.parse(e.data);
        if (details.cmd === 'press-button') {
          buttons[details.buttonId].callback();
        }
      }
      
      window.addEventListener('message', handleMessageFromThirdParty, false);

      function initPlugin() {
        window.parent.postMessage(JSON.stringify({
          cmd: 'add-button', section: 'section-one', buttonId: 'magic-btn', buttonLabel: 'Button text'
        }), '*');
      }
      
      initPlugin();
    </script>
  </head>
  <body>
    Debug
  </body>
</html>
