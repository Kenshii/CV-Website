<html>
  <head>
    <script>
      buttons = {'magic-btn': {
        callback: function() {
          document.write('Pressing the button affected the iframe');
        }
      }}

      window.addEventListener('message', function(e) {
        details = JSON.parse(e.data);
        if (details.cmd === 'press-button') {
          buttons[details.buttonId].callback();
        }
      }, false);

      function initPlugin() {
        window.parent.postMessage(JSON.stringify({
          cmd: 'add-button', section: 'section-one', buttonId: 'magic-btn', buttonLabel: 'Button text'
        }), '*');
      }
      
      initPlugin();
    </script>
  </head>
  <body>
    Debug
  </body>
</html>
